SETUP:

1.  Create expressjs whithout frontend staff and add git folder as well.
npx express-generator --no-view --git ./

2. install nodemon as dev dependenci so that we can use only in development
npm install --save-dev nodemon

3. in package.json add folowing to not use require syntaxt

{"type": "module"}

4. add start script to start the app in production and development
  "scripts": {
    "start": "node app.js",
    "dev":"nodemon app.js"
  },

5. add eslint to keep our code clean
npx eslint --init
with following options:

    √ What do you want to lint? · javascript
    √ How would you like to use ESLint? · problems
    √ What type of modules does your project use? · esm
    √ Which framework does your project use? · none
    √ Does your project use TypeScript? · No / Yes
    √ Where does your code run? · node
    i The config that you've selected requires the following dependencies:

    eslint, @eslint/js, globals
    √ Would you like to install them now? · No / Yes
    √ Which package manager do you want to use? · npm

PUSH TO GITHUB ===============================================================>

1. install dotenv for envirment files
npm install dotenv
2. Create folder name config 
3. Create file name env.js inside the config folder to export every env variable from there. add folowing code:

    import { config } from "dotenv"
    config({path: `.env.${process.env.NODE_ENV || 'development'}.local`})
    export const { PORT } = process.env;

4. create following files for production and development
    .env.production.local 
    .env.development.local

5. inside the .env.development.local add following:
    PORT=5500
    NODE_ENV='development'
6. inside the .env.prodcution.local add following:
    NODE_ENV='production'
7. Import the env variable every where you need like app.js 
    import { PORT } from "./config/env.js"
8. Add env inside the .gitignore to ignore during the github PUSH
    .env.*.local


PUSH TO GITHUB ===================================================================>

1. create folder name routes. Every routes going there like as folowing:
    import  { Router } from  'express';
    const authRouter = Router();
    authRouter.post('/sign-up', (req, res) => res.send({title: "SIGN-UP"}));
    export default authRouter;

2. emport all routes into app.js and use as following:
    import authRouter from "./routes/auth.routes.js";
    app.use("/api/v1/auth", authRouter);

PUSH TO GITHUB ====================================================================>
setup db:
1. Login into mongodb or use any other sql db.
    https://www.mongodb.com/
2. Create project or cluster 
3. Copy the username and password or create new one
    user: username
    pwd: password
4. click create Database and click on choose a connection method
5. click on Drivers and copy the installation command and install the mongodb
    npm install mongodb
6. install the mongoose ORM
    npm install mongoose
7. copy the connection string: if the username and password not exists replace it with actual datas:
    mongodb+srv://....
8. add the mongodb URL into .env.prodcution.local and .env.development.local env files:
9. export the DB_URL from env.js like so:
    export const { PORT, NODE_ENV, DB_URL } = process.env;
10. create folder name database and inisde the that folder create mongodb.js
11. add the db configuration
12. import configuration inside the app.js and add as following:
    app.listen(PORT, async () => {
        console.log(`Server is running on port ${PORT}`);
        await connectToDatabase();
    });

PUSH TO GITHUB ====================================================================>

Create modules:
1. Create folder name modules
2. inside the models folder create different models file like folowing:
    user.model.js
    subscription.model.js
    ....



PUSH TO GITHUB ====================================================================>

Error Handler (The middleware runs before everything else)
1. create folder name middlewares
2. inside the middlewares folder create file name error.middleware.js 
3. Example see inside errorMiddleware.js
Example: 
    const errorMiddleware = (err, req, res, next) => {
    try {
        let error = { ...err };

        error.message = err.message;

        console.error(err);

        // Mongoose bad ObjectId 
        if (err.name === 'CastError') {
        const message = 'Resource not found';
        error = new Error(message);
        error.statusCode = 404;
        }


        res.status(error.statusCode || 500).json({ success: false, error: error.message || 'Server Error' });
    } catch (error) {
        next(error);
    }
    };

    export default errorMiddleware;
4. Use error handler middleware inside app.js as following:
    app.use(errorMiddleware);
5. add other middleware such as: 
    app.use(express.json());
    app.use(express.urlencoded({ extended: false }));
    app.use(cookieParser());
    app.use(arcjetMiddleware);


PUSH TO GITHUB ====================================================================>
Auth Setup:
1. add following env variable for jwt: (we use json web token for our authentication)
    JWT_SECRET="secret"
    JWT_EXPIRES_IN="1d"
2. add JWT variable into env.js configuration so that we can use inside the app:
    Example: 
    export const { JWT_SECRET, JWT_EXPIRES_IN } = process.env;
3. Create folder name controllers. inside the controllers is alle the controllers from the app. like auth, user, ...
4. create file name auth.controller.js inisde the controllers folder
5. install bcrypt for the password increaption
    npm install bcryptjs
6. install jwt for authentication 
    npm install jsonwebtoken









